@import "tailwindcss";
@import "tw-animate-css";
@import "shadcn/tailwind.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  /* ── Fonts ── */
  --font-sans: var(--font-dm-sans), sans-serif;
  --font-mono: var(--font-dm-mono), monospace;

  /* ── Radius ── */
  --radius-sm:   3px;
  --radius:      6px;
  --radius-md:   6px;
  --radius-lg:   12px;
  --radius-xl:   16px;
  --radius-full: 9999px;

  /* ── Aroma color tokens ── */
  --color-bg:            var(--aroma-bg);
  --color-bg-card:       var(--aroma-bg-card);
  --color-bg-muted:      var(--aroma-bg-muted);
  --color-fg:            var(--aroma-fg);
  --color-fg-muted:      var(--aroma-fg-muted);
  --color-fg-subtle:     var(--aroma-fg-subtle);
  --color-border:        var(--aroma-border);
  --color-border-strong: var(--aroma-border-strong);
  --color-accent:        var(--aroma-accent);
  --color-accent-fg:     var(--aroma-accent-fg);
  --color-tag-bg:        var(--aroma-tag-bg);
  --color-tag-fg:        var(--aroma-tag-fg);

  /* ── shadcn compatibility (maps shadcn utility names to Aroma values) ── */
  --color-background:           var(--aroma-bg);
  --color-foreground:           var(--aroma-fg);
  --color-card:                 var(--aroma-bg-card);
  --color-card-foreground:      var(--aroma-fg);
  --color-popover:              var(--aroma-bg-card);
  --color-popover-foreground:   var(--aroma-fg);
  --color-primary:              var(--aroma-accent);
  --color-primary-foreground:   var(--aroma-accent-fg);
  --color-secondary:            var(--aroma-bg-muted);
  --color-secondary-foreground: var(--aroma-fg);
  --color-muted:                var(--aroma-bg-muted);
  --color-muted-foreground:     var(--aroma-fg-muted);
  --color-accent-foreground:    var(--aroma-accent-fg);
  --color-destructive:          oklch(0.577 0.245 27.325);
  --color-input:                var(--aroma-border);
  --color-ring:                 var(--aroma-border-strong);
  --color-sidebar:              var(--aroma-bg-muted);
  --color-sidebar-foreground:   var(--aroma-fg);
  --color-sidebar-border:       var(--aroma-border);
  --color-sidebar-ring:         var(--aroma-border-strong);

  /* ── Animations ── */
  --animate-fade-up: fade-up 0.4s ease forwards;
  --animate-fade-in: fade-in 0.3s ease forwards;
}

@keyframes fade-up {
  0%   { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fade-in {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

/* ── Light mode ── */
:root {
  --aroma-bg:            #F7F6F3;
  --aroma-bg-card:       #FFFFFF;
  --aroma-bg-muted:      #F0EEE9;
  --aroma-border:        #E5E2DC;
  --aroma-border-strong: #C8C4BC;
  --aroma-fg:            #0F0E0C;
  --aroma-fg-muted:      #6B6860;
  --aroma-fg-subtle:     #A09D98;
  --aroma-accent:        #0F0E0C;
  --aroma-accent-fg:     #F7F6F3;
  --aroma-tag-bg:        #ECEAE5;
  --aroma-tag-fg:        #4A4845;

  --radius: 0.375rem; /* 6px — for shadcn internal usage */
}

/* ── Dark mode ── */
.dark {
  --aroma-bg:            #0C0B09;
  --aroma-bg-card:       #141310;
  --aroma-bg-muted:      #1A1916;
  --aroma-border:        #272522;
  --aroma-border-strong: #3A3733;
  --aroma-fg:            #F0EDE8;
  --aroma-fg-muted:      #8A8780;
  --aroma-fg-subtle:     #504E4A;
  --aroma-accent:        #F0EDE8;
  --aroma-accent-fg:     #0C0B09;
  --aroma-tag-bg:        #1F1E1B;
  --aroma-tag-fg:        #9A9790;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    background-color: var(--aroma-bg);
    color: var(--aroma-fg);
    /* Explicit font-family so it applies even if @theme inline var() chain breaks */
    font-family: var(--font-dm-sans), ui-sans-serif, system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  /* Mono font explicitly applied so DM Mono loads for all mono-tagged elements */
  .font-mono,
  code, kbd, samp, pre {
    font-family: var(--font-dm-mono), ui-monospace, monospace;
  }
  ::-webkit-scrollbar { width: 4px; height: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb {
    background: var(--aroma-border-strong);
    border-radius: 2px;
  }
}

@utility font-mono-label {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

@utility font-mono-sm {
  font-family: var(--font-mono);
  font-size: 11px;
  letter-spacing: 0.04em;
}

@utility font-mono-data {
  font-family: var(--font-mono);
  font-size: 20px;
  letter-spacing: -0.02em;
}
